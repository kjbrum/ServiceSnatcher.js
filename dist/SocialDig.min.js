/**
 *
 *  -----------------------------------
 *  SocialDig.js - v0.1.2
 *  -----------------------------------
 *
 *  Query data from your social profiles with ease.
 *
 *  https://github.com/kjbrum/SocialDig.js
 *  @license Copyright (c) Kyle Brumm <http://kylebrumm.com>
 *
 */
!function(e){var t=function(e,a){return new t.init(e,a)};t.prototype={checkCache:function(){var e=this,t=(new Date).getTime(),a=!1,s=JSON.parse(localStorage.getItem(e.service));return s&&(t-s.time<6e4*e.cacheLimit?(e.data=s.data,a=!0):localStorage.removeItem(e.service)),a},JSONP:function(e){var t=this,a="jsonp_callback_"+Math.round(1e5*Math.random());window[a]=function(r){t.data=r,t.cacheData(),delete window[a],document.body.removeChild(s),e(t.data)};var s=document.createElement("script");s.src=t.url+(t.url.indexOf("?")>=0?"&":"?")+"callback="+a,document.body.appendChild(s)},makeRequest:function(e){var t=this,a=new XMLHttpRequest;a.open("GET",t.url,!0);var s=["dribbble","spotify","vimeo"];s.indexOf(t.service)>-1&&a.setRequestHeader("Authorization","Bearer "+t.auth),a.onload=function(){var s=JSON.parse(a.responseText);t.data=s;var r=s.code||a.status;if(!(r>=200&&r<400))throw t.data.message;t.cacheData(),e(t.data)},a.onerror=function(){throw"connection error"},a.send()},queryData:function(){var e=this,t=e.selector;if("string"==typeof e.selector&&(t=document.querySelector(e.selector)),e.checkCache())e.cb(e.data);else{var a=["instagram","behance","tumblr"];a.indexOf(e.service)>-1?e.JSONP(e.cb):e.makeRequest(e.cb)}},cacheData:function(){var e=this,t=(new Date).getTime(),a=JSON.stringify({time:t,data:e.data});localStorage.setItem(e.service,a)}},t.init=function(e,t){var a=this;a.selector=e.selector||".social-dig",a.service=e.service||"",a.user=e.user||"",a.auth=e.auth||"",null==e.cacheLimit?a.cacheLimit=5:a.cacheLimit=e.cacheLimit,a.services={"500px":"https://api.500px.com/v1/photos?consumer_key="+a.auth+"&feature=user&username="+a.user+"&image_size=440",behance:"http://www.behance.net/v2/users/"+a.user+"/projects?client_id="+a.auth,codepen:"http://cpv2api.com/pens/public/"+a.user,dribbble:"https://api.dribbble.com/v1/users/"+a.user+"/shots",flickr:"https://api.flickr.com/services/rest/?method=flickr.people.getPhotos&api_key="+a.auth+"&user_id="+a.user+"&format=json&nojsoncallback=1",github:"https://api.github.com/users/"+a.user+"/repos?sort=updated","google-plus":"https://www.googleapis.com/plus/v1/people/"+a.user+"/activities/public?key="+a.auth,instagram:"https://api.instagram.com/v1/users/self/media/recent/?access_token="+a.auth,lastfm:"http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user="+a.user+"&api_key="+a.auth+"&format=json",pinterest:"https://api.pinterest.com/v1/me/boards/?access_token="+a.auth+"&fields=id,name,url,created_at,counts,description,creator,image,privacy,reason",spotify:"https://api.spotify.com/v1/users/"+a.user+"/playlists",trello:"https://api.trello.com/1/members/"+a.user+"/boards",tumblr:"https://api.tumblr.com/v2/blog/"+a.user+".tumblr.com/posts?api_key="+a.auth,twitter:"https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name="+a.user,vimeo:"https://api.vimeo.com/users/"+a.user+"/videos"},a.url=a.services[a.service],a.data="",a.cb=t,a.queryData()},t.init.prototype=t.prototype,e.SocialDig=e.SD=t}(window);